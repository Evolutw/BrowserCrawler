!function(n){var r={};function o(e){if(r[e])return r[e].exports;var t=r[e]={i:e,l:!1,exports:{}};return n[e].call(t.exports,t,t.exports,o),t.l=!0,t.exports}o.m=n,o.c=r,o.d=function(e,t,n){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"==typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="",o(o.s=11)}([function(e,t,n){"use strict";var r,o,i;t.__esModule=!0,r=t.Log||(t.Log={}),o=!1,i="[JIGUANG-JAnalytics]",r.setDebugMode=function(e){r.d(i,"setDebugMode:"+e),o=e},r.d=function(e,t){},r.dd=function(e,t){o&&window.console&&console.log(i+"["+e+"]"+t)},r.ww=function(e,t){window.console&&console.warn(i+"["+e+"]"+t)},r.ee=function(e,t){window.console&&console.error(i+"["+e+"]"+t)}},function(e,t,n){"use strict";function r(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function o(e){return!e||0==e.length}t.__esModule=!0,t.uuid=function(){return r()+r()+"-"+r()+"-"+r()+"-"+r()+"-"+r()+r()+r()},t.isEmpty=o,t.supportPostMessage=function(){return!!window.postMessage},t.jgEncrypto=function(e){if(o(e))return"";for(var t=String.fromCharCode(e.charCodeAt(0)+e.length),n=1;n<e.length;n++)t+=String.fromCharCode(111^e.charCodeAt(n));return escape(t)},t.jgDecrypto=function(e){if(o(e))return"";e=unescape(e);for(var t=String.fromCharCode(e.charCodeAt(0)-e.length),n=1;n<e.length;n++)t+=String.fromCharCode(111^e.charCodeAt(n));return t}},function(e,t,n){"use strict";t.__esModule=!0,t.APPKEY="APPKEY",t.DEVICEID="DEVICEID",t.ACTION_INIT="init",t.ACTION_ONEVENT="onEvent",t.ACTION_ONPAGE="onPage",t.ACTION_ONLOC="onLoc",t.ACTION_ONLOC_CHECK="onCheckLoc";var r=function(){this.lReg=0,this.lRep=0};t.LocalVariable=r,t.packageInterfaceMessageBody=function(e,t,n){return{action:e,data:t,callbackId:n}},t.packageIframeRespond=function(e,t,n,r,o){return{from:e,type:"onRespond",body:{action:t,callbackId:n,code:r,result:o}}}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(2),o=n(1),i=n(0),s=n(4),a="UserInfoHelper",c={uid:0,rId:"",pw:""},u="";function l(e){s.setLocal(r.DEVICEID,e)||s.setCookie(r.DEVICEID,e,3650)}function f(e){if(!o.isEmpty(e)){var t=e.split("|");c={uid:parseInt(t[0]),rId:t[1],pw:t[2]}}return c}t.getDeviceId=function(e){return o.isEmpty(u)?(u=s.getLocal(r.DEVICEID),o.isEmpty(u)?(u=s.getCookie(r.DEVICEID),o.isEmpty(u)?(l(u=o.isEmpty(e)?o.uuid()+Date.now():e),i.Log.d(a,"New devicdId:"+u)):i.Log.d(a,"getDeviceId from cookie:"+u)):i.Log.d(a,"getDeviceId from local:"+u)):i.Log.d(a,"getDeviceId from running:"+u),u},t.getDeviceIdWhitEmpty=function(){var e=s.getLocal(r.DEVICEID);return o.isEmpty(e)?(e=s.getCookie(r.DEVICEID),o.isEmpty(e)?"":e):e},t.setDeviceId=l,t.getUserInfo=function(e){return 0<c.uid?i.Log.d(a,"getUserInfo from running:"+c.uid):0<(c=f(s.getLocal(e+"_U"))).uid?i.Log.d(a,"getUserInfo from local:"+c.uid):0<(c=f(s.getCookie(e+"_U"))).uid?i.Log.d(a,"getUserInfo from Cookie:"+c.uid):i.Log.d(a,"No uid."),c},t.setUserInfo=function(e,t){if(t){var n=(c=t).uid+"|"+t.rId+"|"+t.pw;s.setLocal(e+"_U",n)||s.setCookie(e+"_U",n,3650)}}},function(e,t,n){"use strict";t.__esModule=!0;var s=n(0),i=n(1),a="WebStore";function c(e){try{var t=window.localStorage;if(t){var n=i.jgEncrypto(e),r=t.getItem("JG_"+n);return r?JSON.parse(i.jgDecrypto(r)):null}}catch(e){}return s.Log.d(a,"The browser does not support localStorage.GET"),null}function r(e,t,n){if(void 0===n&&(n=0),!navigator.cookieEnabled)return s.Log.d(a,"The browser does not support cookies.SET"),!1;var r="JG_"+e+"="+t;if(0==n)document.cookie=r;else{var o=new Date;o.setDate(o.getDate()+n);var i="expires="+o.toUTCString();document.cookie=r+"; "+i}return s.Log.d(a,"Cookie.SET："+r),!0}t.setLocal=function(e,t){try{var n=window.localStorage;if(n&&t){var r=i.jgEncrypto(e),o=i.jgEncrypto(JSON.stringify(t));if(n.setItem("JG_"+r,o),c(e))return s.Log.d(a,"LocalStorage.SET："+e+"="+JSON.stringify(t)),!0}}catch(e){}return s.Log.d(a,"The browser does not support localStorage.SET"),!1},t.getLocal=c,t.removeLocal=function(e){try{var t=window.localStorage;if(t){var n=i.jgEncrypto(e);return t.removeItem("JG_"+n),!0}}catch(e){return!1}},t.setCookie=r,t.getCookie=function(e){if(!navigator.cookieEnabled)return s.Log.d(a,"The browser does not support cookies.GET"),"";for(var t=document.cookie.replace(/\s/g,"").split(";"),n=0;n<t.length;n++){var r=t[n].split("=");if(r[0]=="JG_"+e)return decodeURIComponent(r[1])}return null},t.removeCookie=function(e){return r(name,"0",-1)}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(2),o=n(4),i=n(1);function s(e){if(i.isEmpty(e))return null;var t=e.split("|");return{lReg:parseInt(t[0]),lRep:parseInt(t[1])}}t.getLocalVariable=function(e){var t=s(o.getLocal(e+"_LV"));return t||(t=s(o.getCookie(e+"_LV")))||new r.LocalVariable},t.clearLocalVariable=function(e){o.removeLocal(e+"_LV")||o.removeCookie(e+"_LV")},t.setLocalVariable=function(e,t,n){var r=t+"|"+n;o.setLocal(e+"_LV",r)||o.setCookie(e+"_LV",r)},t.getPageVariable=function(e,t){if(!navigator.cookieEnabled)return{vId:"",lPage:t,duration:0};var n=function(e){if(i.isEmpty(e))return{vId:"",lPage:0};var t=e.split("|");return{vId:t[0],lPage:parseInt(t[1])}}(o.getCookie(e+"_PV"));return i.isEmpty(n.vId)||18e5<t-n.lPage||t-n.lPage<0?(n.vId=t+"",n.duration=0):n.duration=Math.round((t-n.lPage)/1e3),n.lPage=t,o.setCookie(e+"_PV",n.vId+"|"+n.lPage),n}},function(e){e.exports={JANALYTIC_REGISTER_URL:"https://web-stat.jpush.cn/v1/register/web",JANALYTIC_REPORT_URL:"https://web-stat.jpush.cn/web",REQUEST_TIMEOUT:15e3}},function(e,t,n){"use strict";t.__esModule=!0;var r=n(0),o=n(6),i="RequestHelper",s=function(){function e(){}return e.prototype.request=function(e,t){var n=this.generateHttpRequest();n||r.Log.dd(i,"This browser is not support ajax"),n.onload=function(e){4===n.readyState&&t(n.status,n.responseText)},n.onloadstart=function(e){},n.onabort=function(e){t(2,{error:{desc:"request aborted"}})},n.onerror=function(e){t(2,{error:{desc:"request fail"}})},n.ontimeout=function(e){t(2,{error:{desc:"timeout"}})},"GET"==e.method?(n.open("GET",e.url+(null==e.param?"":"?"+e.param),e.async),n.send(null)):(n.open("POST",e.url,e.async),n.timeout=o.REQUEST_TIMEOUT,n.setRequestHeader("Content-Type","application/json;charset=UTF-8"),e.header&&n.setRequestHeader("X-Jpush-AuthType","webregister"),n.send(e.param))},e.prototype.generateHttpRequest=function(){var t;if(XMLHttpRequest)try{t=new XMLHttpRequest}catch(e){}else if(ActiveXObject)try{t=new ActiveXObject("Microsoft.XMLHTTP")}catch(e){t=new ActiveXObject("Msxml2.XMLHTTP")}return t},e}();t.httpReport=function(t){return new Promise(function(n,e){(new s).request(t,function(e,t){r.Log.d(i,"httpReport:"+e+"_"+t),n({statusCode:e,result:t})})})}},,,,function(e,t,n){"use strict";t.__esModule=!0;var s=n(0);n(12);var a=n(2),c=n(16),u=n(3),i=n(17),o=n(5),l="JAnalytics",r=function(){function e(){this.mOrigin=void 0,s.Log.d(l,"JAnalytics loading"),window.addEventListener("message",this,!1),window.addEventListener("storage",this,!1),window.addEventListener("unload",this,!1)}return e.prototype.handleEvent=function(e){switch(e.type){case"unload":this.dealloc();break;case"storage":if(!this.mInitConfig)return;"JG_"+this.mInitConfig.appkey+"_U"==e.key&&c.isRegistered(this.mInitConfig.appkey)&&(c.stopTimeOut(),this.sendMsgToInterface(a.ACTION_INIT,this.mInitCallbackId,1));break;case"message":this.handleAction(e)}},e.prototype.handleAction=function(e){try{var t=JSON.parse(e.data)}catch(e){return}if("JAnalytics"==t.from){var n=t.body;switch(s.Log.d(l,"receive message:"+JSON.stringify(n)),n.action){case a.ACTION_INIT:this.init(n.data,n.callbackId,e.origin);break;case a.ACTION_ONEVENT:this.onEvent(n.data,n.callbackId,e.source,e.origin);break;case a.ACTION_ONPAGE:this.onPage(n.data);break;case a.ACTION_ONLOC_CHECK:this.onCheckLoc(n.data,n.callbackId,e.origin);break;case a.ACTION_ONLOC:this.onLoc(n.data)}}},e.prototype.init=function(e,n,t){var r=this;s.Log.setDebugMode(e.initConfig.debugMode),s.Log.d(l,"init with appkey:"+e.initConfig.appkey),this.mInitConfig=e.initConfig,"https:"==this.mInitConfig.protocal||"http:"==this.mInitConfig.protocal?this.mOrigin=t:this.mOrigin="*",this.mInitCallbackId=n;var o=this.mInitConfig.appkey,i=e.userInfo;u.getDeviceId(i.dId),c.isRegistered(o)?(this.logRegister(u.getUserInfo(o).rId),this.sendMsgToInterface(a.ACTION_INIT,n,1)):0<i.uid?(s.Log.d(l,"save interface userinfo"),this.logRegister(i.rId),u.setUserInfo(o,i),this.sendMsgToInterface(a.ACTION_INIT,n,1)):c.register(e.initConfig,function(e,t){s.Log.d(l,"register code:"+e),2!=e&&(t.deviceId=u.getDeviceId()),r.sendMsgToInterface(a.ACTION_INIT,n,e,t)},!0)},e.prototype.logRegister=function(e){s.Log.dd(l,"Already registered,registerId:"+e)},e.prototype.onEvent=function(e,n,t,r){var o=this;s.Log.d(l,"call onevent "+JSON.stringify(e)),i.reportEvents(this.mInitConfig,e,function(e,t){o.sendMsgToInterface(a.ACTION_ONEVENT,n,e)})},e.prototype.onPage=function(e){s.Log.d(l,"call onPage:"+JSON.stringify(e)),i.reportPageInfo(this.mInitConfig,e)},e.prototype.onCheckLoc=function(e,t,n){var r=this;s.Log.d(l,"call onCheckLoc"),this.mLocCheckTimeOut=void 0,9e5<=e-o.getLocalVariable(this.mInitConfig.appkey).lRep?this.sendMsgToInterface(a.ACTION_ONLOC_CHECK,t,1):(s.Log.dd(l,"Loc info has been reported in 15 minutes"),this.mLocCheckTimeOut=setTimeout(function(){r.onCheckLoc(Date.now(),t,n)},9e5))},e.prototype.onLoc=function(e){s.Log.d(l,"call onLoc:"+JSON.stringify(e)),i.reportLocInfo(this.mInitConfig,e)},e.prototype.dealloc=function(){c.stopTimeOut(),this.mLocCheckTimeOut&&clearTimeout(this.mLocCheckTimeOut),window.removeEventListener("storage",this,!1),window.removeEventListener("unload",this,!1),window.removeEventListener("message",this,!1)},e.prototype.sendMsgToInterface=function(e,t,n,r){if(this.mOrigin){var o=a.packageIframeRespond("JAnalytics",e,t,n,r);s.Log.d(l,"sendMsgToInterface:"+JSON.stringify(o)),parent.window.postMessage(JSON.stringify(o),this.mOrigin)}else s.Log.d(l,"Origin is empty.")},e}();window.janalytics=new r},function(e,t,n){"use strict";e.exports=n(13).polyfill()},function(e,t,n){(function(G,H){
/*!
 * @overview es6-promise - a tiny implementation of Promises/A+.
 * @copyright Copyright (c) 2014 Yehuda Katz, Tom Dale, Stefan Penner and contributors (Conversion to ES6 API by Jake Archibald)
 * @license   Licensed under MIT license
 *            See https://raw.githubusercontent.com/stefanpenner/es6-promise/master/LICENSE
 * @version   v4.2.6+9869a4bc
 */
e.exports=function(){"use strict";function u(e){return"function"==typeof e}var n=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},r=0,t=void 0,o=void 0,a=function(e,t){d[r]=e,d[r+1]=t,2===(r+=2)&&(o?o(p):m())},e="undefined"!=typeof window?window:void 0,i=e||{},s=i.MutationObserver||i.WebKitMutationObserver,c="undefined"==typeof self&&void 0!==G&&"[object process]"==={}.toString.call(G),l="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel;function f(){var e=setTimeout;return function(){return e(p,1)}}var d=new Array(1e3);function p(){for(var e=0;e<r;e+=2){var t=d[e],n=d[e+1];t(n),d[e]=void 0,d[e+1]=void 0}r=0}var h,g,v,y,m=void 0;function _(e,t){var n=this,r=new this.constructor(b);void 0===r[I]&&U(r);var o=n._state;if(o){var i=arguments[o-1];a(function(){return V(o,r,i,n._result)})}else P(n,r,e,t);return r}function w(e){if(e&&"object"==typeof e&&e.constructor===this)return e;var t=new this(b);return S(t,e),t}m=c?function(){return G.nextTick(p)}:s?(g=0,v=new s(p),y=document.createTextNode(""),v.observe(y,{characterData:!0}),function(){y.data=g=++g%2}):l?((h=new MessageChannel).port1.onmessage=p,function(){return h.port2.postMessage(0)}):void 0===e?function(){try{var e=Function("return this")().require("vertx");return void 0===(t=e.runOnLoop||e.runOnContext)?f():function(){t(p)}}catch(e){return f()}}():f();var I=Math.random().toString(36).substring(2);function b(){}var L=void 0,T=1,C=2,E={error:null};function k(e){try{return e.then}catch(e){return E.error=e,E}}function O(e,t,n,r){try{e.call(t,n,r)}catch(e){return e}}function A(e,t,n){var r,o,i,s;t.constructor===e.constructor&&n===_&&t.constructor.resolve===w?(i=e,(s=t)._state===T?R(i,s._result):s._state===C?M(i,s._result):P(s,void 0,function(e){return S(i,e)},function(e){return M(i,e)})):n===E?(M(e,E.error),E.error=null):void 0===n?R(e,t):u(n)?(r=t,o=n,a(function(t){var n=!1,e=O(o,r,function(e){n||(n=!0,r!==e?S(t,e):R(t,e))},function(e){n||(n=!0,M(t,e))},t._label);!n&&e&&(n=!0,M(t,e))},e)):R(e,t)}function S(e,t){var n,r;e===t?M(e,new TypeError("You cannot resolve a promise with itself")):(r=typeof(n=t),null===n||"object"!==r&&"function"!==r?R(e,t):A(e,t,k(t)))}function N(e){e._onerror&&e._onerror(e._result),D(e)}function R(e,t){e._state===L&&(e._result=t,e._state=T,0!==e._subscribers.length&&a(D,e))}function M(e,t){e._state===L&&(e._state=C,e._result=t,a(N,e))}function P(e,t,n,r){var o=e._subscribers,i=o.length;e._onerror=null,o[i]=t,o[i+T]=n,o[i+C]=r,0===i&&e._state&&a(D,e)}function D(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var r=void 0,o=void 0,i=e._result,s=0;s<t.length;s+=3)r=t[s],o=t[s+n],r?V(n,r,o,i):o(i);e._subscribers.length=0}}function V(e,t,n,r){var o=u(n),i=void 0,s=void 0,a=void 0,c=void 0;if(o){if((i=function(e,t){try{return e(t)}catch(e){return E.error=e,E}}(n,r))===E?(c=!0,s=i.error,i.error=null):a=!0,t===i)return void M(t,new TypeError("A promises callback cannot return that same promise."))}else i=r,a=!0;t._state!==L||(o&&a?S(t,i):c?M(t,s):e===T?R(t,i):e===C&&M(t,i))}var j=0;function U(e){e[I]=j++,e._state=void 0,e._result=void 0,e._subscribers=[]}var J=function(){function e(e,t){this._instanceConstructor=e,this.promise=new e(b),this.promise[I]||U(this.promise),n(t)?(this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?R(this.promise,this._result):(this.length=this.length||0,this._enumerate(t),0===this._remaining&&R(this.promise,this._result))):M(this.promise,new Error("Array Methods must be provided an Array"))}return e.prototype._enumerate=function(e){for(var t=0;this._state===L&&t<e.length;t++)this._eachEntry(e[t],t)},e.prototype._eachEntry=function(t,e){var n=this._instanceConstructor,r=n.resolve;if(r===w){var o=k(t);if(o===_&&t._state!==L)this._settledAt(t._state,e,t._result);else if("function"!=typeof o)this._remaining--,this._result[e]=t;else if(n===x){var i=new n(b);A(i,t,o),this._willSettleAt(i,e)}else this._willSettleAt(new n(function(e){return e(t)}),e)}else this._willSettleAt(r(t),e)},e.prototype._settledAt=function(e,t,n){var r=this.promise;r._state===L&&(this._remaining--,e===C?M(r,n):this._result[t]=n),0===this._remaining&&R(r,this._result)},e.prototype._willSettleAt=function(e,t){var n=this;P(e,void 0,function(e){return n._settledAt(T,t,e)},function(e){return n._settledAt(C,t,e)})},e}(),x=function(){function t(e){this[I]=j++,this._result=this._state=void 0,this._subscribers=[],b!==e&&("function"!=typeof e&&function(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}(),this instanceof t?function(t,e){try{e(function(e){S(t,e)},function(e){M(t,e)})}catch(e){M(t,e)}}(this,e):function(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}())}return t.prototype.catch=function(e){return this.then(null,e)},t.prototype.finally=function(t){var n=this.constructor;return u(t)?this.then(function(e){return n.resolve(t()).then(function(){return e})},function(e){return n.resolve(t()).then(function(){throw e})}):this.then(t,t)},t}();return x.prototype.then=_,x.all=function(e){return new J(this,e).promise},x.race=function(o){var i=this;return n(o)?new i(function(e,t){for(var n=o.length,r=0;r<n;r++)i.resolve(o[r]).then(e,t)}):new i(function(e,t){return t(new TypeError("You must pass an array to race."))})},x.resolve=w,x.reject=function(e){var t=new this(b);return M(t,e),t},x._setScheduler=function(e){o=e},x._setAsap=function(e){a=e},x._asap=a,x.polyfill=function(){var e=void 0;if(void 0!==H)e=H;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=x},x.Promise=x}()}).call(this,n(14),n(15))},function(e,t){var n,r,o=e.exports={};function i(){throw new Error("setTimeout has not been defined")}function s(){throw new Error("clearTimeout has not been defined")}function a(t){if(n===setTimeout)return setTimeout(t,0);if((n===i||!n)&&setTimeout)return n=setTimeout,setTimeout(t,0);try{return n(t,0)}catch(e){try{return n.call(null,t,0)}catch(e){return n.call(this,t,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:i}catch(e){n=i}try{r="function"==typeof clearTimeout?clearTimeout:s}catch(e){r=s}}();var c,u=[],l=!1,f=-1;function d(){l&&c&&(l=!1,c.length?u=c.concat(u):f=-1,u.length&&p())}function p(){if(!l){var e=a(d);l=!0;for(var t=u.length;t;){for(c=u,u=[];++f<t;)c&&c[f].run();f=-1,t=u.length}c=null,l=!1,function(t){if(r===clearTimeout)return clearTimeout(t);if((r===s||!r)&&clearTimeout)return r=clearTimeout,clearTimeout(t);try{r(t)}catch(e){try{return r.call(null,t)}catch(e){return r.call(this,t)}}}(e)}}function h(e,t){this.fun=e,this.array=t}function g(){}o.nextTick=function(e){var t=new Array(arguments.length-1);if(1<arguments.length)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];u.push(new h(e,t)),1!==u.length||l||a(p)},h.prototype.run=function(){this.fun.apply(null,this.array)},o.title="browser",o.browser=!0,o.env={},o.argv=[],o.version="",o.versions={},o.on=g,o.addListener=g,o.once=g,o.off=g,o.removeListener=g,o.removeAllListeners=g,o.emit=g,o.prependListener=g,o.prependOnceListener=g,o.listeners=function(e){return[]},o.binding=function(e){throw new Error("process.binding is not supported")},o.cwd=function(){return"/"},o.chdir=function(e){throw new Error("process.chdir is not supported")},o.umask=function(){return 0}},function(e,t){var n;n=function(){return this}();try{n=n||new Function("return this")()}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var r=this&&this.__awaiter||function(i,s,a,c){return new(a||(a=Promise))(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((c=c.apply(i,s||[])).next())})},l=this&&this.__generator||function(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};t.__esModule=!0;var f,o,d,p=n(0),h=n(3),g=n(5),v=n(7),y=n(6),m="RegisterHelper",_=!1,w=0;function I(a,c,u){return r(this,void 0,void 0,function(){var t,n,r,o,i,s;return l(this,function(e){switch(e.label){case 0:return f=void 0,d&&(clearInterval(d),d=void 0),u&&Date.now()-g.getLocalVariable(a.appkey).lReg<3e4?(p.Log.dd(m,"Other tabs are registering,try in 30 seconds..."),f=setTimeout(function(){L(a.appkey)?c(1,h.getUserInfo(a.appkey)):I(a,c,!0)},3e4),[2]):_?(p.Log.d(m,"is connecting"),[2]):(_=!0,t=Date.now(),g.setLocalVariable(a.appkey,t,0),c(3,{itime:t}),p.Log.d(m,"register...:"+JSON.stringify(a)),navigator.onLine?(w++,n={ver:16,platform:5,appkey:a.appkey,channel:a.channel,StatisticSDKVer:a.sdkVersion,installation:0,resolution:a.resolution,DeviceId:h.getDeviceId(),business:4,hostName:a.hostname,protocol:a.protocal},r=JSON.stringify(n),p.Log.d(m,"Register content:"+r),[4,v.httpReport({url:y.JANALYTIC_REGISTER_URL,method:"POST",param:r,async:!0,header:!0})]):(_=!1,p.Log.dd(m,"register failed,no network"),b(a,c),[2]));case 1:if(o=e.sent())if(200===o.statusCode){if(0==(i=JSON.parse(o.result)).code&&i.uid&&i.password&&i.RegistrationID)return p.Log.dd(m,"Register success,registerId:"+i.RegistrationID),s={uid:i.uid,rId:i.RegistrationID,pw:i.password},h.setUserInfo(a.appkey,s),c(1,s),[2];if(105===i.code||1005===i.code||1008===i.code||1009===i.code)return p.Log.ee(m,"Register Failed with error code:"+i.code),g.clearLocalVariable(a.appkey),c(2,i.code),_=!1,[2]}else p.Log.d(m,"Register no reponse");return _=!1,b(a,c),[2]}})})}function b(e,t){if(o=void 0,3<=w)return p.Log.ww(m,"Register Failed."),t(2,""),g.clearLocalVariable(e.appkey),w=0,void(d=setInterval(function(){L(e.appkey)&&(t(1,h.getUserInfo(e.appkey)),clearInterval(d))},3e4));p.Log.d(m,"It will be re-registered in 15 seconds..."),o=setTimeout(function(){I(e,t,!1)},15e3)}function L(e){return 0<h.getUserInfo(e).uid}t.register=I,t.isRegistered=L,t.stopTimeOut=function(){o&&clearTimeout(o),f&&clearTimeout(f),d&&clearInterval(d)}},function(e,t,n){"use strict";var a=this&&this.__awaiter||function(i,s,a,c){return new(a||(a=Promise))(function(e,t){function n(e){try{o(c.next(e))}catch(e){t(e)}}function r(e){try{o(c.throw(e))}catch(e){t(e)}}function o(t){t.done?e(t.value):new a(function(e){e(t.value)}).then(n,r)}o((c=c.apply(i,s||[])).next())})},c=this&&this.__generator||function(n,r){var o,i,s,e,a={label:0,sent:function(){if(1&s[0])throw s[1];return s[1]},trys:[],ops:[]};return e={next:t(0),throw:t(1),return:t(2)},"function"==typeof Symbol&&(e[Symbol.iterator]=function(){return this}),e;function t(t){return function(e){return function(t){if(o)throw new TypeError("Generator is already executing.");for(;a;)try{if(o=1,i&&(s=2&t[0]?i.return:t[0]?i.throw||((s=i.return)&&s.call(i),0):i.next)&&!(s=s.call(i,t[1])).done)return s;switch(i=0,s&&(t=[2&t[0],s.value]),t[0]){case 0:case 1:s=t;break;case 4:return a.label++,{value:t[1],done:!1};case 5:a.label++,i=t[1],t=[0];continue;case 7:t=a.ops.pop(),a.trys.pop();continue;default:if(!(s=0<(s=a.trys).length&&s[s.length-1])&&(6===t[0]||2===t[0])){a=0;continue}if(3===t[0]&&(!s||t[1]>s[0]&&t[1]<s[3])){a.label=t[1];break}if(6===t[0]&&a.label<s[1]){a.label=s[1],s=t;break}if(s&&a.label<s[2]){a.label=s[2],a.ops.push(t);break}s[2]&&a.ops.pop(),a.trys.pop();continue}t=r.call(n,a)}catch(e){t=[6,e],i=0}finally{o=s=0}if(5&t[0])throw t[1];return{value:t[0]?t[1]:void 0,done:!0}}([t,e])}}};t.__esModule=!0;var u=n(0),l=n(7),i=n(3),s=n(5),f=n(6),d="ReportHelper";function p(o,i,s){return a(this,void 0,void 0,function(){var t,n,r;return c(this,function(e){switch(e.label){case 0:return t=JSON.stringify(i),u.Log.d(d,"report "+o+" content:"+t),n=f.JANALYTIC_REPORT_URL+("page"==o?"/action":"/report"),[4,l.httpReport({url:n,method:"POST",param:t,async:!0,header:!1})];case 1:return r=e.sent(),s?(r&&200===r.statusCode?(u.Log.d(d,"Report "+o+" success."),s(1,"")):s(2,""),[2]):[2]}})})}function h(e,t){return{platform:"b",uid:i.getUserInfo(e.appkey).uid,app_key:e.appkey,channel:e.channel,statistics_sdk_ver:e.sdkVersion,content:Array.isArray(t)?t:[t]}}t.reportPageInfo=function(r,o){return a(this,void 0,void 0,function(){var t,n;return c(this,function(e){return t=o.itime,0==(n=s.getPageVariable(r.appkey,t)).duration&&(n=o.pv),p("page",{type:"page_info",uid:i.getUserInfo(r.appkey).uid,app_key:r.appkey,channel:r.channel,statistics_sdk_ver:r.sdkVersion,itime:t,title:o.title,url:o.url,referer:o.referer,resolution:o.resolution,cookie:n.vId,duration:n.duration}),[2]})})},t.reportLocInfo=function(r,o){return a(this,void 0,void 0,function(){var t,n;return c(this,function(e){return t=o.itime,s.setLocalVariable(r.appkey,0,t),n={type:"loc_info",itime:Math.round(t/1e3),lat:o.lat,lng:o.lng},p("loc",h(r,n)),[2]})})},t.reportEvents=function(t,n,r){return a(this,void 0,void 0,function(){return c(this,function(e){return p("events",h(t,n),r),[2]})})},t.report=p,t.batchReport=h}]);